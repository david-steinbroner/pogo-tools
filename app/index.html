<!DOCTYPE html>
<!-- v3-refactor: Cloudflare Pages deployment trigger -->
<html lang="en" data-skin="gba-ds">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, viewport-fit=cover" name="viewport"/>
<title>PoGO Pal</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
<link rel="stylesheet" href="./styles/app.css?v=81">
<script
  src="https://browser.sentry-cdn.com/8.48.0/bundle.tracing.replay.min.js"
  crossorigin="anonymous"
></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js" defer></script>
</head>
<body>

<div class="app">
<!-- Fatal init error fallback (shown if JS completely fails) -->
<div id="initError" class="init-error mono" hidden>Something went wrong loading PoGO Pal. Refresh the page, or try a private window.</div>
<!-- APP BAR -->
<header id="appBar" class="appbar">
  <div class="appbar-left">
    <div class="title">PoGO Pal</div>
    <span class="version-tag" id="versionTag">v2.0.72</span>
  </div>
  <div class="appbar-right">
    <input accept=".csv" class="hidden-file" id="fileInput" type="file"/>
    <button id="uploadBtn" class="icon-btn" type="button" aria-label="Upload CSV" title="Upload CSV">
      <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M19 15v4H5v-4H3v6h18v-6h-2zM11 17V8.83l-2.59 2.58L7 10l5-5 5 5-1.41 1.41L13 8.83V17h-2z"></path>
      </svg>
    </button>
    <button id="infoBtn" class="icon-btn gbp-q" type="button" aria-label="About" title="About Pogo Pal">?</button>
  </div>
</header>

<main class="main">
  <div class="app-window">
    <!-- Window Tabs -->
    <div class="window-tabs" role="tablist" aria-label="Mode">
      <button id="modeVsBtn" class="window-tab is-active" role="tab" aria-selected="true" type="button">Versus</button>
      <button id="modeCollectionBtn" class="window-tab" role="tab" aria-selected="false" type="button">Collection</button>
      <button id="modeTradeBtn" class="window-tab" role="tab" aria-selected="false" type="button">Trade</button>
    </div>

    <!-- Window Content -->
    <div class="window-content">
      <!-- VIEW: VERSUS -->
      <div id="viewVersus">
    <section id="vsView" class="vs-view">
      <div class="vs-panel">
        <!-- Header - always visible, never scrolls -->
        <div class="opponent-header" id="vsOpponentHeader">
          <div class="opponent-header-top">
            <div class="panel-subtitle mono">OPPONENT POKéMON TYPE(S)</div>
          </div>
          <div class="opponent-header-pills" id="vsHeaderPills"></div>
        </div>

        <!-- Scrollable body -->
        <div class="vs-panel-body" id="vsPanelBody">
          <!-- Type grid section - hidden when collapsed -->
          <div class="type-grid-section" id="vsTypeGridSection">
            <div class="opponent-instructions">
              <span class="helper-text mono">Choose opponent POKéMON TYPE(S) to get battle recommendations.</span>
            </div>
            <div class="type-grid" id="vsTypeGrid" aria-label="Opponent type grid"></div>
            <div class="action-row">
              <button class="sheet-btn ghost" id="vsClearBtn" type="button">Clear</button>
              <button class="sheet-btn" id="vsDoneBtn" type="button">Done</button>
            </div>
          </div>

          <!-- Recommendations Carousel - shown after Done -->
          <div id="vsRecommendations" hidden>
            <!-- Carousel Track -->
            <div class="carousel-track" id="carouselTrack">

              <!-- SLIDE 0: Best Pokemon Against -->
              <div class="carousel-slide" data-carousel-index="0" id="vsGeneralPokeSection">
                <div class="carousel-header">
                  <div class="panel-subtitle mono">BEST POKéMON AGAINST</div>
                </div>
                <div class="carousel-content">
                  <div class="brief-container" id="vsBudgetSection">
                    <div class="brief-row">
                      <div class="picks-list" id="vsBudgetPicks"></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- SLIDE 1: Worst Pokemon Against -->
              <div class="carousel-slide" data-carousel-index="1" id="vsStrongAgainstSection">
                <div class="carousel-header">
                  <div class="panel-subtitle mono">WORST POKéMON AGAINST</div>
                </div>
                <div class="carousel-content">
                  <div class="brief-container" id="vsStrongAgainstContainer">
                    <div class="brief-row">
                      <div class="picks-list" id="vsStrongAgainstPicks"></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- SLIDE 2: Best Pokemon Types Against -->
              <div class="carousel-slide" data-carousel-index="2" id="vsPokeTypesSection">
                <div class="carousel-header">
                  <div class="panel-subtitle mono">BEST POKéMON TYPES AGAINST</div>
                </div>
                <div class="carousel-content">
                  <div class="brief-container">
                    <div class="brief-row">
                      <div class="picks-list" id="vsBringBodies"></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- SLIDE 3: Worst Pokemon Types Against -->
              <div class="carousel-slide" data-carousel-index="3" id="vsPokeTypesStrongSection">
                <div class="carousel-header">
                  <div class="panel-subtitle mono">WORST POKéMON TYPES AGAINST</div>
                </div>
                <div class="carousel-content">
                  <div class="brief-container">
                    <div class="brief-row">
                      <div class="picks-list" id="vsAvoidBodies"></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- SLIDE 4: Best Move Types Against -->
              <div class="carousel-slide" data-carousel-index="4" id="vsMoveTypesSection">
                <div class="carousel-header">
                  <div class="panel-subtitle mono">BEST MOVE TYPES AGAINST</div>
                </div>
                <div class="carousel-content">
                  <div class="brief-container">
                    <div class="brief-row">
                      <div class="picks-list" id="vsBringMoves"></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- SLIDE 5: Worst Move Types Against -->
              <div class="carousel-slide" data-carousel-index="5" id="vsMoveTypesStrongSection">
                <div class="carousel-header">
                  <div class="panel-subtitle mono">WORST MOVE TYPES AGAINST</div>
                </div>
                <div class="carousel-content">
                  <div class="brief-container">
                    <div class="brief-row">
                      <div class="picks-list" id="vsAvoidMoves"></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- SLIDE 6: Your Pokemon -->
              <div class="carousel-slide" data-carousel-index="6" id="vsYourPokeSection">
                <div class="carousel-header">
                  <div class="panel-subtitle mono">YOUR POKéMON</div>
                </div>
                <div class="carousel-content">
                  <div class="brief-container" id="vsPokeRecoResults" hidden>
                    <div class="brief-row">
                      <div class="picks-list" id="vsTopPicks"></div>
                    </div>
                    <div class="brief-row">
                      <div class="picks-list" id="vsRiskyPicks"></div>
                    </div>
                    <div class="helper-text mono" id="vsRosterNote" hidden></div>
                  </div>
                  <div class="brief-container" id="vsUploadPrompt">
                    <div class="vs-empty">
                      <span class="mono">Upload your CSV for personalized picks</span>
                      <button class="icon-btn vs-empty-upload" id="vsUploadPromptBtn" type="button" aria-label="Upload CSV" title="Upload CSV">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                          <path d="M19 15v4H5v-4H3v6h18v-6h-2zM11 17V8.83l-2.59 2.58L7 10l5-5 5 5-1.41 1.41L13 8.83V17h-2z"></path>
                        </svg>
                      </button>
                    </div>
                  </div>
                </div>
              </div>

            </div><!-- /.carousel-track -->

            <!-- Dot Indicators -->
            <div class="carousel-dots" id="carouselDots">
              <button class="carousel-dot is-active" data-index="0" type="button" aria-label="Go to slide 1"></button>
              <button class="carousel-dot" data-index="1" type="button" aria-label="Go to slide 2"></button>
              <button class="carousel-dot" data-index="2" type="button" aria-label="Go to slide 3"></button>
              <button class="carousel-dot" data-index="3" type="button" aria-label="Go to slide 4"></button>
              <button class="carousel-dot" data-index="4" type="button" aria-label="Go to slide 5"></button>
              <button class="carousel-dot" data-index="5" type="button" aria-label="Go to slide 6"></button>
              <button class="carousel-dot" data-index="6" type="button" aria-label="Go to slide 7"></button>
            </div>

          </div>
        </div><!-- /.vs-panel-body -->
      </div>
    </section>
  </div>

      <!-- VIEW: COLLECTION -->
      <div id="viewCollection" hidden>
        <section class="coming-soon-placeholder">
          <div class="vs-panel">
            <div class="vs-panel-header">
              <div class="panel-subtitle mono">Coming soon. This tab will help you organize your POKéMON collection.</div>
            </div>
            <div class="vs-block">
              <div class="collapsible-placeholder mono">...</div>
            </div>
          </div>
        </section>
      </div>

      <!-- VIEW: TRADE -->
      <div id="viewTrade" hidden>
        <section class="coming-soon-placeholder">
          <div class="vs-panel">
            <div class="vs-panel-header">
              <div class="panel-subtitle mono">Coming soon. This tab will help you know what POKéMON to trade and transfer.</div>
            </div>
            <div class="vs-block">
              <div class="collapsible-placeholder mono">...</div>
            </div>
          </div>
        </section>
      </div>
    </div><!-- /.window-content -->
  </div><!-- /.app-window -->
</main>

<!-- Type Picker Sheet (Collection mode) -->
<div class="sheet-backdrop" hidden="" id="sheetBackdrop"></div>
<section aria-label="Choose types" aria-modal="true" class="sheet" hidden="" id="typesSheet" role="dialog">
  <div class="sheet-header">
    <div class="sheet-title">Choose types</div>
    <div class="sheet-actions">
      <button class="sheet-btn ghost" id="selectAllBtn" type="button">All</button>
      <button class="sheet-btn ghost" id="sheetClearBtn" type="button">Clear</button>
      <button class="sheet-btn" id="sheetDoneBtn" type="button">Done</button>
    </div>
  </div>
  <div class="sheet-body">
    <div aria-label="Type grid" class="type-grid" id="typeGrid"></div>
    <div class="sheet-hint mono">Tap types to toggle. Selected types show as icons above.</div>
  </div>
</section>

<div id="drawerBackdrop" class="drawer-backdrop" hidden></div>

<aside id="infoDrawer" class="drawer" aria-hidden="true" aria-label="About drawer">
  <div class="drawer-header">
    <div class="drawer-title">ABOUT POGO PAL</div>
    <button id="drawerCloseBtn" class="drawer-close-btn" aria-label="Close" title="Close">X</button>
  </div>

  <div class="drawer-content">
    <div class="gloss">
      POGO PAL helps you make quick choices in POKéMON GO.
    </div>

    <details open>
      <summary>VERSUS</summary>
      <div class="gloss">
        Pick the opponent's TYPE(S). Then read the results like this:
        <br/><br/>
        • <strong>BEST POKéMON AGAINST</strong><br/>
        Good picks to use against the opponent type(s).
        <br/><br/>
        • <strong>WORST POKéMON AGAINST</strong><br/>
        Risky picks to avoid against the opponent type(s).
        <br/><br/>
        • <strong>BEST POKéMON TYPES AGAINST</strong><br/>
        Types that hit the opponent for super effective damage.
        <br/><br/>
        • <strong>WORST POKéMON TYPES AGAINST</strong><br/>
        Types that hit the opponent for not very effective damage.
        <br/><br/>
        • <strong>BEST MOVE TYPES AGAINST</strong><br/>
        Your moves that will do super effective damage.
        <br/><br/>
        • <strong>WORST MOVE TYPES AGAINST</strong><br/>
        Your moves that will do not very effective damage.
        <br/><br/>
        • <strong>YOUR POKéMON</strong><br/>
        If you upload a PokeGenie CSV, POGO PAL will show picks from your own roster.
      </div>
    </details>

    <details>
      <summary>COMING SOON</summary>
      <div class="gloss">
        • <strong>COLLECTION:</strong> upload and organize your POKéMON<br/>
        • <strong>TRADE:</strong> tips on which POKéMON to trade<br/>
        • More ways to upload your POKéMON to POGO PAL
      </div>
    </details>
  </div>
</aside>

<aside id="uploadDrawer" class="drawer" aria-hidden="true" aria-label="Upload drawer">
  <div class="drawer-header">
    <div class="drawer-title">UPLOAD</div>
    <button id="uploadDrawerCloseBtn" class="drawer-close-btn" aria-label="Close" title="Close">X</button>
  </div>

  <div class="drawer-content">
    <div class="gloss">
      Upload your POKéMON collection to get personalized battle picks.
    </div>

    <div class="upload-panel">
      <div class="upload-panel-row">
        <span class="upload-label">Supported:</span>
        <span class="upload-value">PokeGenie CSV</span>
      </div>
      <div class="upload-panel-row upload-coming-soon">
        More file types coming soon
      </div>
    </div>

    <div class="upload-action">
      <button id="uploadDrawerBtn" class="upload-action-btn" type="button">
        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M19 15v4H5v-4H3v6h18v-6h-2zM11 17V8.83l-2.59 2.58L7 10l5-5 5 5-1.41 1.41L13 8.83V17h-2z"></path>
        </svg>
        <span>Choose File</span>
      </button>
    </div>

    <div id="uploadStatus" class="upload-status" hidden>
      <span class="upload-status-icon">✓</span>
      <span class="upload-status-text">Loaded</span>
    </div>
  </div>
</aside>

<!-- Error/Feedback Modal (reusable app-wide) -->
<div id="errorModalBackdrop" class="modal-backdrop" hidden></div>
<div id="errorModal" class="modal error-modal" hidden aria-modal="true" role="alertdialog" aria-label="Error">
  <div class="modal-card error-panel">
    <div class="modal-header">
      <div class="modal-title error-title" id="errorTitle">Error</div>
      <button id="errorModalClose" class="modal-close-btn" type="button" aria-label="Dismiss">X</button>
    </div>
    <div class="modal-body">
      <div class="error-meta" id="errorBody"></div>
    </div>
  </div>
</div>

<footer class="app-footer">
  <span>(C) 2026 Skunk Den</span>
  <span>·</span>
  <a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener">MIT License</a>
  <span>·</span>
  <a href="https://github.com/david-steinbroner/pogo-pal" target="_blank" rel="noopener">GitHub</a>
  <span>·</span>
  <span class="disclaimer">Not affiliated with Niantic/Nintendo</span>
</footer>

</div>

<script type="module" src="./src/app.js?v=2.0.72"></script>
</body>
</html>
