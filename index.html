<!DOCTYPE html>
<!-- v3-refactor: Cloudflare Pages deployment trigger -->
<html lang="en" data-skin="gba-ds">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, viewport-fit=cover" name="viewport"/>
<title>PoGO Pal</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
<link rel="stylesheet" href="./styles/app.css?v=3.3.45c">
<script
  src="https://browser.sentry-cdn.com/8.48.0/bundle.tracing.replay.min.js"
  crossorigin="anonymous"
></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js" defer></script>
</head>
<body>

<div id="appScaleWrapper">
<div class="app">
<!-- Fatal init error fallback (shown if JS completely fails) -->
<div id="initError" class="init-error mono" hidden>Something went wrong loading PoGO Pal. Refresh the page, or try a private window.</div>
<!-- APP BAR -->
<header id="appBar" class="appbar">
  <div class="appbar-left">
    <div class="title">PoGO Pal</div>
  </div>
  <div class="appbar-right">
    <!-- Upload button removed - see docs/REMOVED_UPLOAD_FEATURE.md -->
    <button id="infoBtn" class="icon-btn" type="button" aria-label="About" title="About Pogo Pal">
      <svg class="icon" viewBox="0 0 20 20" aria-hidden="true">
        <!-- Info: circle with i (square caps for retro feel) -->
        <circle cx="10" cy="10" r="7" fill="none" stroke="currentColor" stroke-width="1.75"/>
        <line x1="10" y1="9" x2="10" y2="14" stroke="currentColor" stroke-width="1.75" stroke-linecap="square"/>
        <rect x="9" y="5.5" width="2" height="2" fill="currentColor"/>
      </svg>
    </button>
    <button id="darkModeBtn" class="icon-btn" type="button" aria-label="Toggle theme" title="Toggle theme">
      <svg class="icon theme-icon theme-icon--light" viewBox="0 0 20 20" aria-hidden="true">
        <!-- Sun: circle with rays (square caps for retro feel) -->
        <circle cx="10" cy="10" r="3.5" fill="none" stroke="currentColor" stroke-width="1.75"/>
        <line x1="10" y1="1" x2="10" y2="3.5" stroke="currentColor" stroke-width="1.75" stroke-linecap="square"/>
        <line x1="10" y1="16.5" x2="10" y2="19" stroke="currentColor" stroke-width="1.75" stroke-linecap="square"/>
        <line x1="1" y1="10" x2="3.5" y2="10" stroke="currentColor" stroke-width="1.75" stroke-linecap="square"/>
        <line x1="16.5" y1="10" x2="19" y2="10" stroke="currentColor" stroke-width="1.75" stroke-linecap="square"/>
        <line x1="3.9" y1="3.9" x2="5.7" y2="5.7" stroke="currentColor" stroke-width="1.75" stroke-linecap="square"/>
        <line x1="14.3" y1="14.3" x2="16.1" y2="16.1" stroke="currentColor" stroke-width="1.75" stroke-linecap="square"/>
        <line x1="3.9" y1="16.1" x2="5.7" y2="14.3" stroke="currentColor" stroke-width="1.75" stroke-linecap="square"/>
        <line x1="14.3" y1="5.7" x2="16.1" y2="3.9" stroke="currentColor" stroke-width="1.75" stroke-linecap="square"/>
      </svg>
      <svg class="icon theme-icon theme-icon--dark" viewBox="0 0 20 20" aria-hidden="true">
        <!-- Moon: crescent (square caps for retro feel) -->
        <path d="M17 10.5A7.5 7.5 0 1 1 9.5 3 5.5 5.5 0 0 0 17 10.5z" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="square" stroke-linejoin="miter"/>
      </svg>
      <svg class="icon theme-icon theme-icon--system" viewBox="0 0 20 20" aria-hidden="true">
        <!-- Phone: simple rectangle (square caps for retro feel) -->
        <rect x="5" y="2" width="10" height="16" rx="1" fill="none" stroke="currentColor" stroke-width="1.75"/>
        <line x1="8" y1="15" x2="12" y2="15" stroke="currentColor" stroke-width="1.75" stroke-linecap="square"/>
      </svg>
    </button>
  </div>
</header>

<main class="main">
  <div class="app-window">
    <!-- Window Tabs -->
    <div class="window-tabs" role="tablist" aria-label="Mode">
      <button id="modeVsBtn" class="window-tab is-active" role="tab" aria-selected="true" type="button">Versus</button>
      <button id="modeCollectionBtn" class="window-tab" role="tab" aria-selected="false" type="button">Collection</button>
      <button id="modeTradeBtn" class="window-tab" role="tab" aria-selected="false" type="button">Trade</button>
    </div>

    <!-- Window Content -->
    <div class="window-content">
      <!-- VIEW: VERSUS -->
      <div id="viewVersus">
        <!-- Secondary Tabs for Versus -->
        <div class="window-tabs window-tabs-secondary" role="tablist" aria-label="Versus Mode">
          <button id="vsSubTabTypes" class="window-tab is-active" role="tab" aria-selected="true" type="button">Opponent Types</button>
          <button id="vsSubTabPokemon" class="window-tab" role="tab" aria-selected="false" type="button">Opponent Pokemon</button>
        </div>

        <!-- Sub-view: Opponent Types (existing content) -->
        <div id="vsSubViewTypes" class="vs-sub-view">
    <section id="vsView" class="vs-view">
      <div class="vs-panel">
        <!-- Header - always visible, never scrolls -->
        <div class="opponent-header" id="vsOpponentHeader">
          <div class="opponent-header-pills" id="vsHeaderPills"></div>
        </div>

        <!-- Scrollable body -->
        <div class="vs-panel-body" id="vsPanelBody">
          <!-- Type grid section - hidden when collapsed -->
          <div class="type-grid-section" id="vsTypeGridSection">
            <div class="opponent-instructions">
              <span class="helper-text mono">Choose opponent POKéMON TYPE(S) to get battle recommendations.</span>
            </div>
            <div class="type-grid" id="vsTypeGrid" aria-label="Opponent type grid"></div>
            <div class="action-row">
              <button class="sheet-btn ghost" id="vsClearBtn" type="button">Clear</button>
              <button class="sheet-btn" id="vsDoneBtn" type="button">Done</button>
            </div>
          </div>

          <!-- Recommendations Carousel - shown after Done -->
          <div id="vsRecommendations" hidden>
            <!-- Carousel Track -->
            <div class="carousel-track" id="carouselTrack">

              <!-- SLIDE 0: Best Counters + Best Counter Types + Super Effective Move Types -->
              <div class="carousel-slide carousel-slide--no-icons" data-carousel-index="0" id="vsGeneralPokeSection">
                <!-- Best Counters -->
                <div class="carousel-header">
                  <div class="panel-subtitle mono">BEST COUNTERS</div>
                </div>
                <div class="carousel-content">
                  <div class="brief-container" id="vsBudgetSection">
                    <div class="brief-row">
                      <div class="picks-list" id="vsBudgetPicks"></div>
                    </div>
                  </div>
                </div>
                <!-- Best Counter Types -->
                <div class="carousel-header">
                  <div class="panel-subtitle mono">BEST COUNTER TYPES</div>
                </div>
                <div class="carousel-content">
                  <div class="brief-container" id="vsPokeTypesSection">
                    <div class="brief-row">
                      <div class="picks-list" id="vsBringBodies"></div>
                    </div>
                  </div>
                </div>
                <!-- Super Effective Move Types -->
                <div class="carousel-header">
                  <div class="panel-subtitle mono">SUPER EFFECTIVE MOVE TYPES</div>
                </div>
                <div class="carousel-content">
                  <div class="brief-container" id="vsMoveTypesSection">
                    <div class="brief-row">
                      <div class="picks-list" id="vsBringMoves"></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- SLIDE 1: Worst Counters + Worst Counter Types + Not Very Effective Move Types -->
              <div class="carousel-slide carousel-slide--no-icons" data-carousel-index="1" id="vsStrongAgainstSection">
                <!-- Worst Counters -->
                <div class="carousel-header">
                  <div class="panel-subtitle mono">WORST COUNTERS</div>
                </div>
                <div class="carousel-content">
                  <div class="brief-container" id="vsStrongAgainstContainer">
                    <div class="brief-row">
                      <div class="picks-list" id="vsStrongAgainstPicks"></div>
                    </div>
                  </div>
                </div>
                <!-- Worst Counter Types -->
                <div class="carousel-header">
                  <div class="panel-subtitle mono">WORST COUNTER TYPES</div>
                </div>
                <div class="carousel-content">
                  <div class="brief-container" id="vsPokeTypesStrongSection">
                    <div class="brief-row">
                      <div class="picks-list" id="vsAvoidBodies"></div>
                    </div>
                  </div>
                </div>
                <!-- Not Very Effective Move Types -->
                <div class="carousel-header">
                  <div class="panel-subtitle mono">NOT VERY EFFECTIVE MOVE TYPES</div>
                </div>
                <div class="carousel-content">
                  <div class="brief-container" id="vsMoveTypesStrongSection">
                    <div class="brief-row">
                      <div class="picks-list" id="vsAvoidMoves"></div>
                    </div>
                  </div>
                </div>
              </div>

            </div><!-- /.carousel-track -->

            <!-- Dot Indicators -->
            <div class="carousel-dots" id="carouselDots">
              <button class="carousel-dot is-active" data-index="0" type="button" aria-label="Go to slide 1"></button>
              <button class="carousel-dot" data-index="1" type="button" aria-label="Go to slide 2"></button>
            </div>

          </div>
        </div><!-- /.vs-panel-body -->
      </div>
    </section>
        </div><!-- /#vsSubViewTypes -->

        <!-- Sub-view: Opponent Pokemon (coming soon) -->
        <div id="vsSubViewPokemon" class="vs-sub-view" hidden>
          <section class="vs-view">
            <div class="vs-panel">
              <div class="vs-panel-body">
                <div class="coming-soon-content">
                  <div class="panel-subtitle mono">OPPONENT POKéMON</div>
                  <p class="helper-text mono">Coming soon. Search and analyze any Pokémon to see its strengths, weaknesses, and best counters.</p>
                </div>
              </div>
            </div>
          </section>
        </div><!-- /#vsSubViewPokemon -->
      </div>

      <!-- VIEW: COLLECTION -->
      <div id="viewCollection" hidden>
        <section class="coming-soon-placeholder">
          <div class="vs-panel">
            <div class="vs-panel-header">
              <div class="panel-subtitle mono">Coming soon. This tab will help you organize your POKéMON collection.</div>
            </div>
            <div class="vs-block">
              <div class="collapsible-placeholder mono">...</div>
            </div>
          </div>
        </section>
      </div>

      <!-- VIEW: TRADE -->
      <div id="viewTrade" hidden>
        <section class="coming-soon-placeholder">
          <div class="vs-panel">
            <div class="vs-panel-header">
              <div class="panel-subtitle mono">Coming soon. This tab will help you know what POKéMON to trade and transfer.</div>
            </div>
            <div class="vs-block">
              <div class="collapsible-placeholder mono">...</div>
            </div>
          </div>
        </section>
      </div>
    </div><!-- /.window-content -->
  </div><!-- /.app-window -->
</main>

<!-- Type Picker Sheet (Collection mode) -->
<div class="sheet-backdrop" hidden="" id="sheetBackdrop"></div>
<section aria-label="Choose types" aria-modal="true" class="sheet" hidden="" id="typesSheet" role="dialog">
  <div class="sheet-header">
    <div class="sheet-title">Choose types</div>
    <div class="sheet-actions">
      <button class="sheet-btn ghost" id="selectAllBtn" type="button">All</button>
      <button class="sheet-btn ghost" id="sheetClearBtn" type="button">Clear</button>
      <button class="sheet-btn" id="sheetDoneBtn" type="button">Done</button>
    </div>
  </div>
  <div class="sheet-body">
    <div aria-label="Type grid" class="type-grid" id="typeGrid"></div>
    <div class="sheet-hint mono">Tap types to toggle. Selected types show as icons above.</div>
  </div>
</section>

<div id="drawerBackdrop" class="drawer-backdrop" hidden></div>

<aside id="infoDrawer" class="drawer" aria-hidden="true" aria-label="About drawer">
  <div class="drawer-header">
    <div class="drawer-title">ABOUT POGO PAL</div>
    <button id="drawerCloseBtn" class="drawer-close-btn" aria-label="Close" title="Close">X</button>
  </div>

  <div class="drawer-content">
    <div class="gloss">
      POGO PAL helps you make quick choices in POKéMON GO.
    </div>

    <details>
      <summary>VERSUS</summary>
      <div class="gloss">
        Pick the opponent's TYPE(S). Then read the results like this:
        <br/><br/>
        • <strong>BEST POKéMON AGAINST</strong><br/>
        Good picks to use against the opponent type(s).
        <br/><br/>
        • <strong>WORST POKéMON AGAINST</strong><br/>
        Risky picks to avoid against the opponent type(s).
        <br/><br/>
        • <strong>BEST POKéMON TYPES AGAINST</strong><br/>
        Types that hit the opponent for super effective damage.
        <br/><br/>
        • <strong>WORST POKéMON TYPES AGAINST</strong><br/>
        Types that hit the opponent for not very effective damage.
        <br/><br/>
        • <strong>BEST MOVE TYPES AGAINST</strong><br/>
        Your moves that will do super effective damage.
        <br/><br/>
        • <strong>WORST MOVE TYPES AGAINST</strong><br/>
        Your moves that will do not very effective damage.
        <br/><br/>
      </div>
    </details>

    <details>
      <summary>COMING SOON</summary>
      <div class="gloss">
        • <strong>COLLECTION:</strong> manage your POKéMON<br/>
        • <strong>TRADE:</strong> tips on which POKéMON to trade
      </div>
    </details>

    <!-- Beta Feedback Form -->
    <details id="feedbackSection">
      <summary>BETA FEEDBACK</summary>
      <div class="feedback-form">
        <!-- Rating -->
        <div class="form-group">
          <label class="form-label">How's it going?</label>
          <div class="rating-row" id="feedbackRating">
            <button type="button" class="rating-btn" data-rating="1" title="Frustrating">1</button>
            <button type="button" class="rating-btn" data-rating="2" title="Needs work">2</button>
            <button type="button" class="rating-btn" data-rating="3" title="Okay">3</button>
            <button type="button" class="rating-btn" data-rating="4" title="Good">4</button>
            <button type="button" class="rating-btn" data-rating="5" title="Great!">5</button>
          </div>
        </div>

        <!-- What went wrong? (MULTI-SELECT) -->
        <div class="form-group">
          <label class="form-label">What went wrong? (select all that apply)</label>
          <div class="checkbox-group" id="feedbackIssues">
            <label class="checkbox-item"><input type="checkbox" name="issue" value="confusing"> Confusing</label>
            <label class="checkbox-item"><input type="checkbox" name="issue" value="slow"> Slow/laggy</label>
            <label class="checkbox-item"><input type="checkbox" name="issue" value="broken"> Something broken</label>
            <label class="checkbox-item"><input type="checkbox" name="issue" value="ugly"> Doesn't look right</label>
            <label class="checkbox-item"><input type="checkbox" name="issue" value="other"> Other</label>
          </div>
          <input type="text" id="feedbackOtherIssue" class="form-input" placeholder="Describe other issue..." hidden>
        </div>

        <!-- Where did it happen? -->
        <div class="form-group">
          <label class="form-label">Where did it happen?</label>
          <div class="radio-group" id="feedbackWhere">
            <label class="radio-item"><input type="radio" name="where" value="versus"> Versus</label>
            <label class="radio-item"><input type="radio" name="where" value="about"> About/Help</label>
            <label class="radio-item"><input type="radio" name="where" value="not-sure" checked> Not sure</label>
          </div>
        </div>

        <!-- Freeform text -->
        <div class="form-group">
          <label class="form-label">Anything else?</label>
          <textarea id="feedbackText" class="form-textarea" rows="3" placeholder="Optional details..."></textarea>
        </div>

        <!-- Screenshot attachment -->
        <div class="form-group">
          <label class="form-label">Screenshot (optional)</label>
          <input type="file" id="feedbackAttachment" accept="image/*" class="form-file">
        </div>

        <!-- Submit button -->
        <button type="button" id="feedbackSubmitBtn" class="sheet-btn feedback-submit">Submit Feedback</button>
        <div id="feedbackStatus" class="feedback-status" hidden></div>

        <!-- Owner-only controls (hidden by default) -->
        <div id="ownerControls" class="owner-controls" hidden>
          <div class="owner-stats">
            <span class="mono" id="feedbackCount">0 saved submissions</span>
          </div>
          <div class="owner-buttons">
            <button type="button" id="exportFeedbackBtn" class="sheet-btn ghost">Export JSON</button>
            <button type="button" id="clearFeedbackBtn" class="sheet-btn ghost">Clear All</button>
          </div>
        </div>
      </div>
    </details>

    <div class="drawer-version">
      <button id="versionCopyBtn" class="version-copy-btn" type="button" title="Tap to copy version">
        <span id="versionTag">v3.3.46</span>
      </button>
      <span id="versionCopied" class="version-copied" hidden>Copied!</span>
    </div>
  </div>
</aside>

<!-- Upload drawer removed - see docs/REMOVED_UPLOAD_FEATURE.md -->

<!-- Error/Feedback Modal (reusable app-wide) -->
<div id="errorModalBackdrop" class="modal-backdrop" hidden></div>
<div id="errorModal" class="modal error-modal" hidden aria-modal="true" role="alertdialog" aria-label="Error">
  <div class="modal-card error-panel">
    <div class="modal-header">
      <div class="modal-title error-title" id="errorTitle">Error</div>
      <button id="errorModalClose" class="modal-close-btn" type="button" aria-label="Dismiss">X</button>
    </div>
    <div class="modal-body">
      <div class="error-meta" id="errorBody"></div>
    </div>
  </div>
</div>

<!-- Passcode Modal (owner access) -->
<div id="passcodeModalBackdrop" class="modal-backdrop" hidden></div>
<div id="passcodeModal" class="modal" hidden aria-modal="true" role="dialog" aria-label="Enter passcode">
  <div class="modal-card">
    <div class="modal-header">
      <div class="modal-title">Owner Access</div>
      <button id="passcodeModalClose" class="modal-close-btn" type="button" aria-label="Dismiss">X</button>
    </div>
    <div class="modal-body">
      <input type="password" id="passcodeInput" class="form-input" placeholder="Enter passcode" autocomplete="off">
      <button type="button" id="passcodeSubmitBtn" class="sheet-btn" style="margin-top: var(--space-sm); width: 100%;">Unlock</button>
      <div id="passcodeError" class="feedback-status error" hidden>Incorrect passcode</div>
    </div>
  </div>
</div>

<!-- Pokemon Info Popup (appears on tap) -->
<div id="pokePopup" class="poke-popup" hidden>
  <div class="poke-popup-text" id="pokePopupText"></div>
</div>

<footer class="app-footer">
  <div class="footer-line">(C) 2026 Skunk Den · <a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener">MIT License</a></div>
  <div class="footer-line"><a href="https://github.com/david-steinbroner/pogo-pal" target="_blank" rel="noopener">GitHub</a> · Not affiliated with Niantic/Nintendo</div>
</footer>

</div>
</div><!-- /#appScaleWrapper -->

<script type="module" src="./src/app.js?v=3.3.45"></script>
</body>
</html>
